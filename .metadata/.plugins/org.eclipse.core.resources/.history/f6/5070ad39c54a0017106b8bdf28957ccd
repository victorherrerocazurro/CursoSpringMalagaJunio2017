package com.viewnext.holamundomaven.views;

import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.View;

/**
 * 
 * View que permite renderizar el contenido en text/html o text/plain, 
 * en cualquier otro caso se lanzará una excepcion 
 * 
 * Se necesita establecer en el modelo, el parametro nombre
 * 
 * @author alumno
 *
 */
public class CustomView implements View {
	
	public CustomView(String contentType) {
		super();
		this.contentType = contentType;
	}

	private String contentType; 
	
	@Override
	public String getContentType() {
		return contentType;
	}

	@Override
	public void render(Map<String, ?> model, 
			HttpServletRequest request, 
			HttpServletResponse response) throws Exception {
		switch (contentType) {
		case "text/html":
			response.getWriter().println("<div>" + model.get("nombre") + "</div>");
			break;
		case "text/plain":
			response.getWriter().println(model.get("nombre"));
			break;
		default:
			throw new Exception("ContentType no soportado");
		}
	}

}
